(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17b1f0c4"],{1817:function(e,t,n){"use strict";n("8245")},"1da7":function(e,t,n){"use strict";n("b5b4")},3702:function(e,t,n){"use strict";n("6b11")},"57be":function(e,t,n){"use strict";n.r(t);var l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reasoning-container"},[n("div",{staticClass:"top-box"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.openDialog}},[e._v("创建推理端点")])],1),n("div",{staticClass:"bottom-box"},[n("el-table",{staticStyle:{width:"100%"},attrs:{height:"100%",header:"",data:e.tableData}},[n("el-table-column",{attrs:{align:"center",prop:"name",label:"名称",width:"220"}}),n("el-table-column",{attrs:{align:"center",prop:"status",label:"状态",width:"120"}}),n("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间",width:"240"}}),n("el-table-column",{attrs:{align:"center",prop:"trafficPercent",label:"流量百分比",width:"120"}}),n("el-table-column",{attrs:{align:"center",prop:"url",label:"访问地址"}}),n("el-table-column",{attrs:{align:"center",prop:"taskWithModel",label:"任务/模型",width:"280"}}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.handleClick(t.row)}}},[e._v("推理")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.del(t.row)}}},[e._v("删除")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.details(t.row)}}},[e._v("详情")])]}}])})],1)],1),n("el-dialog",{staticClass:"reasoning-dialog",attrs:{title:"创建推理端点",visible:e.dialogFormVisible,top:"20vh","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[e.dialogFormVisible?n("ReasoningForm",{ref:"reasoningForm",attrs:{modelList:e.modelList}}):e._e(),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确定")])],1)],1),n("el-dialog",{attrs:{title:"推理",visible:e.chatBoxVisible,width:"60%",top:"10vh","close-on-click-modal":!1},on:{"update:visible":function(t){e.chatBoxVisible=t}}},[e.chatBoxVisible?n("ChartBox",{ref:"chartBox",attrs:{endpointName:e.endpointName}}):e._e()],1)],1)},i=[],s=(n("b0c0"),n("d3b7"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",staticClass:"experiment-form",attrs:{model:e.form,rules:e.rules,"label-width":"100px","label-position":"top"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"模型仓库",prop:"experimentName"}},[n("el-select",{attrs:{placeholder:"请选择模型仓库"},model:{value:e.form.experimentName,callback:function(t){e.$set(e.form,"experimentName",t)},expression:"form.experimentName"}},e._l(e.modelList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"端点名称",prop:"endpointName"}},[n("el-input",{model:{value:e.form.endpointName,callback:function(t){e.$set(e.form,"endpointName",t)},expression:"form.endpointName"}})],1)],1)],1)],1)}),a=[],o={props:{modelList:{type:Array,default:function(){return[]}}},data:function(){return{formLabelWidth:"120px",form:{experimentName:"",endpointName:""},rules:{experimentName:[{required:!0,message:"请选择模型仓库",trigger:"blur"}],endpointName:[{required:!0,message:"请输入端点名称",trigger:"change"}]}}},created:function(){},methods:{suggest:function(){}}},r=o,c=(n("1da7"),n("2877")),u=Object(c["a"])(r,s,a,!1,null,null,null),d=u.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-container"},[n("div",{staticClass:"chat-messages"},[n("json-editor",{attrs:{mode:"code",showBtns:!1,editable:!1,readonly:!0},model:{value:e.messages,callback:function(t){e.messages=t},expression:"messages"}})],1),n("div",{staticClass:"chat-input"},[n("el-input",{attrs:{placeholder:"请输入内容"},on:{blur:e.onBlur},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)}},model:{value:e.instances,callback:function(t){e.instances=t},expression:"instances"}}),n("el-button",{on:{click:e.upload}},[e._v("上传文件")]),n("el-button",{on:{click:e.upload1}},[e._v("上传文件夹")]),n("el-button",{attrs:{type:"primary"},on:{click:e.sendMessage}},[e._v("发送")])],1),n("div",[n("input",{attrs:{hidden:"",id:"upload-file",type:"file",name:"files",accept:".csv,.jpg,.jpeg,.png,.git,.bmp,.raw,.ico,.webp,.heic"},on:{change:e.onFileChanged}}),n("input",{attrs:{hidden:"",type:"file",id:"upload-folder",name:"folderUpload",webkitdirectory:"",multiple:""},on:{change:e.onFolderChanged}}),e.uploadNum?n("span",{staticClass:"uploadClass"},[e._v("已上传"+e._s(e.uploadNum)+"个文件"),n("span",{staticClass:"tagClose",on:{click:e.handleUploadClose}},[e._v("x")])]):e._e()]),n("div",{staticClass:"tip-box"},[e._v("tip:每次只能发送一种类型数据")])])},p=[],f=n("2909"),h=(n("b64b"),n("2aab")),g={props:{endpointName:{type:String,default:""}},data:function(){return{messages:"",instances:null,file:null,folder:null,uploadNum:null,type:null}},mounted:function(){},methods:{onBlur:function(){this.type="text",this.uploadNum=null,this.file=null,this.folder=null,console.log("输入文字")},upload:function(){console.log("上传单文件"),document.getElementById("upload-file").click()},onFileChanged:function(e){this.type="file",console.log("🚀 ~ onFileChanged ~ e:",e.target,e.target.files),this.uploadNum=e.target.files.length,this.uploadParameters=!0,this.file=e.target.files[0],this.folder=null,this.instances=null,e.target.value=null},upload1:function(){document.getElementById("upload-folder").click()},onFolderChanged:function(e){this.type="folder",this.uploadNum=e.target.files.length,this.uploadParameters=!1,this.folder=Object(f["a"])(e.target.files),this.file=null,this.instances=null,e.target.value=null,console.log("🚀 ~ onFolderChanged ~ this.folder:",this.folder)},handleUploadClose:function(){this.uploadNum=null,this.instances=null,this.file=null,this.folder=null},sendMessage:function(){var e=this;if(this.instances||this.file||this.folder){if("text"==this.type){var t={endpointName:this.endpointName,instances:JSON.parse(this.instances)};Object(h["d"])(t).then((function(t){e.messages=t.data,e.$message({type:"success",message:t.message})})),this.instances="",this.uploadNum=null}else if("file"==this.type){var n=new FormData;n.append("endpointName",this.endpointName),n.append("files",this.file),Object(h["c"])(n).then((function(t){e.messages=t.data,e.$message({type:"success",message:t.message})})),this.file=null,this.uploadNum=null}else if("folder"==this.type){var l=new FormData;l.append("endpointName",this.endpointName),this.folder.forEach((function(e){l.append("files",e)})),Object(h["c"])(l).then((function(t){e.messages=t.data,e.$message({type:"success",message:t.message})})),this.folder=null,this.uploadNum=null}}else this.$message({type:"warning",message:"请输入内容或者上传文件!"})}}},b=g,v=(n("1817"),Object(c["a"])(b,m,p,!1,null,null,null)),y=v.exports,w=n("c114"),N={components:{ReasoningForm:d,ChartBox:y},data:function(){return{dialogFormVisible:!1,chatBoxVisible:!1,tableData:[],modelList:[],endpointName:""}},created:function(){this.init()},methods:{init:function(){this.getOverview(),this.getSelect()},getOverview:function(){var e=this;Object(h["f"])().then((function(t){e.tableData=t.data["services-overview"],console.log("🚀 ~ overview ~  this.tableData:",e.tableData)}))},getSelect:function(){var e=this;Object(w["h"])().then((function(t){t.models.forEach((function(t,n){e.modelList.push({value:t,label:t})})),console.log("🚀 ~ getSelect ~ this.modelList",e.modelList)}))},handleClick:function(e){console.log(e),this.endpointName=e.name,this.chatBoxVisible=!0},openDialog:function(){this.dialogFormVisible=!0},info:function(e){this.$router.push("/reasoning/detail")},del:function(e){var t=this;console.log("🚀 ~ del ~ row:",e),this.$confirm("确认要删除该任务吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n=e.name;Object(h["g"])(n).then((function(e){console.log("🚀 ~ del ~ res",e),200===e.code&&(t.getOverview(),t.$message({type:"success",message:"删除成功!"}))}))})).catch((function(){}))},submitForm:function(e){var t=this;this.$refs.reasoningForm.$refs.form.validate((function(e){if(!e)return!1;var n=t.$refs.reasoningForm.form;Object(h["a"])(n).then((function(e){console.log("🚀 ~ submitForm ~ res",e),200===e.code&&(t.$message({type:"success",message:"创建成功!"}),t.dialogFormVisible=!1,t.getOverview())}))}))},details:function(e){this.$router.push({path:"/reasoning/detail",query:{name:e.name}})}}},x=N,k=(n("3702"),Object(c["a"])(x,l,i,!1,null,null,null));t["default"]=k.exports},"6b11":function(e,t,n){},8245:function(e,t,n){},b5b4:function(e,t,n){}}]);